<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Customer Form</title>
    <link href="assets/styles/style.css" rel="stylesheet">
    <link href="assets/fonts/css/all.min.css" rel="stylesheet">
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">

</head>
<body>

<div class="has-bg-img ">
    <img class="bg-img position-absolute " src="assets/images/image4.jpg" alt="..." style="width: 100% ;height: 98vh ">

    <div id="blur-area"></div>

    <section class="container">
        <nav>
            <img src="assets/images/Logo.png" alt="" class="logo">
            <ul>
                <li><a href="index.html" >HOME</a> </li>
                <li><a href="" >ORDER</a> </li>
                <li><a href="customer.html" >Manage Customer</a> </li>
                <li><a href="item.html" >Manage Item</a> </li>

            </ul>
        </nav>
    </section>

    <section class="container-fluid mt-3 form">
        <section class="row mt-3 justify-content-around">
            <div class="col-12 col-md-4">
                <div class="shadow-sm pt-3 pb-5 px-3 py-3 mt-2">
                    <h1 class="h1 mb-3" style="color: white">Item Manage</h1>
                    <div class="mb-3">
                        <label class="form-label" for="srcCusID">Search Item</label>
                        <input class="form-control" id="srcCusID" placeholder="Customer ID, NIC, Name" type="text">
                    </div>
                    <button class="btn btn-primary" id="btnSearch" >Search</button>
                    <button class="btn btn-danger" id="btnDelete">Delete</button>
                    <button class="btn btn-success" id="btnSaveOrUpdate">Save or Update</button>
                </div>
            </div>
            <div class="col-12 col-md-5">
                <div class="mb-3">
                    <label class="form-label" style="color: white" for="txtItemCode">Item Code</label>
                    <input class="form-control" id="txtItemCode" placeholder="Item Code" type="text">
                </div>
                <div class="mb-3">
                    <label class="form-label" style="color: white" for="txtItemName">Item Name</label>
                    <input class="form-control" id="txtItemName" placeholder="Item Name" type="text">
                </div>
                <div class="mb-3">
                    <label class="form-label" style="color: white" for="txtItemQty">Item Qty</label>
                    <input class="form-control" id="txtItemQty" placeholder="Item Qty" type="text">
                </div>
                <div class="mb-3">
                    <label class="form-label"style="color: white" for="txtItemPrice">Item Price</label>
                    <input class="form-control" id="txtItemPrice" placeholder="Item Price" type="text">
                </div>
            </div>
        </section>
        <section class="row mt-4">
            <div class="col">
                <table class="table table-hover" STYLE="color: white">
                    <thead class="bg-danger text-white">
                    <tr>
                        <th>Item Code</th>
                        <th>Item Name</th>
                        <th>Item Qty</th>
                        <th>Item Price</th>
                    </tr>
                    </thead>
                    <tbody id="itemTable">


                    </tbody>
                </table>
            </div>
        </section>

    </section>

</div>
<script src="assets/jQuery/jquery-3.6.0.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<script src="db/DB.js"></script>
<script>
    // Add Customer

    // Select Button
    $("#btnSaveOrUpdate").click(function () {

        // remove all the row click events added before
        $("#itemTable>tr").off();


        //gather customer information
        let itemCode = $("#txtItemCode").val();
        let itemName = $("#txtItemName").val();
        let itemQty = $("#txtItemQty").val();
        let itemPrice = $("#txtItemPrice").val();

        /*create a html row*/
        let row = `<tr><td>${itemCode}</td><td>${itemName}</td><td>${itemQty}</td><td>${itemPrice}</td></tr>`;

        /*select the table body and append the row */
        $("#itemTable").append(row);


        //bind the events to the table rows after the row was added
        $("#itemTable>tr").click(function () {
            // this//dom object
            // $(this);//jQuery object

            // $(this)//tr
            // $(this).children(); //return all td inside selected row
            let itemCode = $(this).children(":eq(0)").text(); // select first td and get text
            let itemName = $(this).children(":eq(1)").text();
            let itemQty = $(this).children(":eq(2)").text();
            let itemPrice = $(this).children(":eq(3)").text();

            console.log(itemCode, itemName, itemQty, itemPrice);

            // set values for the input fields
            $("#txtItemCode").val(itemCode);
            $("#txtItemName").val(itemName);
            $("#txtItemQty").val(itemQty);
            $("#txtItemPrice").val(itemPrice);

        });

/*
        *Remove/!*Remove selected row from the double click*!/
        $("#itemTable>tr").dblclick(function () {
            $(this).remove();
        });*/

    });


    var regExCusID = /^(I00-)[0-9]{3,4}$/;

    $("#txtItemCode").keyup(function () {
        let input = $("#txtItemCode").val();
        if (regExCusID.test(input)) {
            $("#txtItemCode").css('border', '2px solid green');
            $("#error").text("");
        } else {
            $("#txtItemCode").css('border', '2px solid red');
            $("#error").text("Wrong format : I00-001");
        }
    });
</script>
</body>
</html>